(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7971],{40595:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}});var r=n(809),a=n.n(r),c=n(92447),o=n(85893),s=n(74047),i=n(52700),l=n(8127),u=n(44102),p=n(20775),g=n(67294),f=n(46119),d=n(28261),h=n(59999),m=n(4706),_=n(26265),v=n(53082),w=n(9008),y=n(26692),b=n(57670),x=n(39771),N=n.n(x),Z=n(51034),j=n.n(Z),P=n(89490),O=n(91202),S=n.n(O),k=n(96451);function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var I=function(e){(0,l.Z)(n,e);var t=C(n);function n(){var e;(0,s.Z)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),(0,_.Z)((0,m.Z)(e),"state",{sortedContent:(0,h.Z)(e.props.content.items)}),(0,_.Z)((0,m.Z)(e),"getNumberOfPages",(function(){var t=e.props.numberOfItems;return t?Math.ceil(t/16):0})),(0,_.Z)((0,m.Z)(e),"getArrPages",(function(){var t=new Array(e.getNumberOfPages()).fill(1);return t=t.map((function(e,t){return t+1}))})),e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=window.innerWidth,t=20;e<768&&(t=8),e>767&&e<1025&&(t=16),e>1024&&e<1280&&(t=20),e>1279&&(t=24);var n=(0,h.Z)(this.props.content.items.slice(0,t));this.setState({sortedContent:n})}},{key:"render",value:function(){var e=this,t=this.props,n=t.content,r=t.numberOfItems,a=t.getContentUrl,c=t.page,s=this.props.profile.childProfile,i=this.state.sortedContent;if(!(n&&n.items&&n.items.length))return(0,o.jsx)(b.Z,{});var l=this.props.registration.authData,u="".concat(this.props.t("new.new")).concat(l&&(l.email||l.phone)?"":this.props.t("new.watch-online")),p=[{title:u,name:u}];return(0,o.jsxs)("div",{className:"".concat(j().genres_global_wrapper," ").concat(N().page_wrapper," ").concat(j().new_wrapper),children:[(0,o.jsxs)(w.default,{children:[(0,o.jsx)("title",{children:this.props.t("new.title",{year:(new Date).getFullYear()})}),(0,o.jsx)("meta",{name:"description",content:this.props.t("new.meta",{year:(new Date).getFullYear()})})]}),(0,o.jsx)(y.Z,{breadcrumbs:p}),(0,o.jsxs)("div",{className:"".concat(j().genres_global_body,"  ").concat(j().new_body),children:[s?(0,o.jsx)("h1",{children:"".concat(this.props.t("new.new-genres-1")).concat(l&&(l.email||l.phone)?"":this.props.t("new.watch-online"))}):(0,o.jsx)("h1",{children:"".concat(this.props.t("new.new-genres-2")).concat(l&&(l.email||l.phone)?"":this.props.t("new.watch-online")," ").concat(c&&c>1?" \u2013 ".concat(this.props.t("new.page")," ").concat(c):"")}),n&&n.items&&n.items.length?(0,o.jsx)(P.Z,{data:i,getContentUrl:a,numberOfItems:r,year:"year",genre:"genre",endPage:c===this.getNumberOfPages(),selfSortFlag:"-start_release_date"},"0"):null,(0,o.jsx)("noscript",{children:(0,o.jsxs)("div",{className:S().pagination__wrapper,children:[c&&1!==c?(0,o.jsx)("a",{href:"/new".concat(2===c?"":"/page".concat(c-1)),children:(0,o.jsx)("img",{src:"/static/images/Catalog/arrow-pagination-left.svg"})}):null,this.getArrPages().map((function(t,n){return(0,o.jsxs)(g.Fragment,{children:[c&&c>4&&2===n&&r>4&&(0,o.jsx)("div",{className:S().ellipsis,children:"..."}),(c+3<e.getNumberOfPages()||!c)&&n===e.getNumberOfPages()-1&&e.getNumberOfPages()>5||!c&&e.getNumberOfPages()>4&&t===e.getNumberOfPages()?(0,o.jsx)("div",{className:S().ellipsis,children:"..."}):null,c?null:t<=3||t===e.getNumberOfPages()?(0,o.jsx)("a",{className:"".concat(S().page," ").concat(t===c||!c&&0===n?S().active:""),href:"/new".concat(0!==n?"/page".concat(t):""),children:t}):null,c&&(c-2<=t&&t<=c+2||t===e.getNumberOfPages()||1===t)?(0,o.jsx)("a",{className:"".concat(S().page," ").concat(t===c||!c&&0===n?S().active:""),href:"/new".concat(0!==n?"/page".concat(t):""),children:t}):null]},"".concat(t,"-").concat(n))})),c&&c!==this.getNumberOfPages()||!c&&this.getNumberOfPages()>1?(0,o.jsx)("a",{href:"/new".concat("/page".concat(c?c+1:2)),children:(0,o.jsx)("img",{src:"/static/images/Catalog/arrow-pagination-right.svg"})}):null]})})]})]})}}]),n}(g.Component),R=(0,v.$j)((function(e){return{profile:e.profile,registration:e.registration}}))((0,k.Z)()(I)),q=n(11768);n(7143);function D(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var F=function(e){(0,l.Z)(n,e);var t=D(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.numberOfItems,r=e.getContentUrl,a=e.pageN,c=e.forKidsFlag;return!t||t.message||c?(0,o.jsx)(b.Z,{}):(0,o.jsx)(R,{content:t,numberOfItems:n,getContentUrl:r,page:a})}}],[{key:"getInitialProps",value:function(){var e=(0,c.Z)(a().mark((function e(t){var n,r,c,o,s,i,l,u,p,g,h,m,_,v,w,y,b,x,N,Z,j,P,O,S,k,C;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.query.page,l=t.asPath,u=(null===(n=t.reduxStore.getState())||void 0===n||null===(r=n.systemInformation)||void 0===r?void 0:r.API_URL)||d.T5,_=q.ZP.load("FOR_KIDS")||q.ZP.load("profileType"),v=t.req&&t.req.cookies&&("True"==t.req.cookies.FOR_KIDS||"true"==t.req.cookies.profileType)||"true"===_,w="&for_kids=".concat(v?"true":"false"),y=t.req&&t.req.headers&&t.req.headers["geoip-country-code"]?"&geoip_cc=".concat(t.req.headers["geoip-country-code"]):"",b=(null===(c=t.reduxStore.getState())||void 0===c||null===(o=c.systemInformation)||void 0===o?void 0:o.locale)||(null===t||void 0===t||null===(s=t.query)||void 0===s?void 0:s.locale)||"ru",x="&locale=".concat(b),N="&content_lang=".concat(b),i&&i.includes("page")&&(p=isNaN(Number(i.replace("page","")))?null:Number(i.replace("page",""))),1!==p&&0!==p||t.res.redirect(l.replace("/page1","").replace("/page","")),Z=t.reduxStore.getState()&&t.reduxStore.getState().catalog&&t.reduxStore.getState().catalog.cardsCount?t.reduxStore.getState().catalog.cardsCount:20,j="".concat(u,"/categories?category=movie,series&device_type=web&sort=-start_release_date").concat(y).concat(w).concat(d.__).concat(x).concat(N),P="".concat(j,"&limit=").concat(p?16:Z,"&skip=").concat(p?16*(p-1):0),e.next=17,fetch(P);case 17:if(!((O=e.sent).status<400)){e.next=22;break}return e.next=21,O.json();case 21:g=e.sent;case 22:return S="".concat(u).concat(f.ve.categoriesFilter,"?category=movie,series&device_type=web").concat(d.__).concat(w).concat(y).concat(x).concat(N),e.next=25,fetch(S);case 25:if(!((k=e.sent).status<400)){e.next=31;break}return e.next=29,k.json();case 29:h=e.sent,m=h&&h.category?h.category.movie+h.category.series:0;case 31:return C="".concat(j),e.abrupt("return",{data:g,numberOfItems:m,getContentUrl:C,pageN:p,forKidsFlag:v});case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(g.Component)},97360:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/new",function(){return n(40595)}])},51034:function(e){e.exports={genres_global_wrapper:"Genres_genres_global_wrapper__2-hAW",new_wrapper:"Genres_new_wrapper__1ypw3",new_body:"Genres_new_body__12IYq",genres_global_body:"Genres_genres_global_body__1S-dU"}}},function(e){e.O(0,[9774,7925,3433,2090,7018,2191,1688,4588],(function(){return t=97360,e(e.s=t);var t}));var t=e.O();_N_E=t}]);