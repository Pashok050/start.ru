(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8882],{88882:function(e,n,t){"use strict";t.d(n,{De:function(){return K},lj:function(){return Z}});var o=t(90484),a=t(96156);function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function r(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var p,d,l="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",h=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,n="",t=e;t--;)n+=l[64*Math.random()|0];return n},f=["agreements","promo","vkc_behavior","vkc_auth_action","vkc_brand","vkc_display_mode","service_groups","external_device_id"];(d=p||(p={}))[d.UNKNOWN=1]="UNKNOWN",d[d.MISSING_PARAM=2]="MISSING_PARAM",d[d.CONNECTION_LOST=3]="CONNECTION_LOST",d[d.USER_DENIED=4]="USER_DENIED",d[d.INVALID_PARAMS=5]="INVALID_PARAMS",d[d.CUSTOM=6]="CUSTOM",d[d.CONNECT_WINDOW_CLOSED=7]="CONNECT_WINDOW_CLOSED",d[d.CONNECT_WINDOW_NOT_OPENED=8]="CONNECT_WINDOW_NOT_OPENED",d[d.CONNECT_DOMAIN_NOT_ALLOWED=9]="CONNECT_DOMAIN_NOT_ALLOWED",d[d.CONNECT_UNKNOWN_SDK_MESSAGE=10]="CONNECT_UNKNOWN_SDK_MESSAGE",d[d.OLD_MISSING_PARAM=100]="OLD_MISSING_PARAM";var A=function(e){return'URL domain "'.concat(e,'" is not allowed.')},_=function(e){return"This SDK message is unknown: ".concat(e)},O=!("undefined"==typeof window||!window.document||!window.document.createElement),g=function(){};if(O&&!!window.addEventListener)try{var E=Object.defineProperty({},"passive",{get:function(){}});window.addEventListener("test",g,E),window.removeEventListener("test",g,E)}catch(d){}function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}!function(){if(!O)return!1;try{document.createElement("div").scrollTo({top:0,get behavior(){return!0,"smooth"}})}catch(d){}}();var y=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==(0,o.Z)(e)||null===e)return"";n=m({encode:!0},n);var t=function(e){return n.encode?encodeURIComponent(e):String(e)};return Object.keys(e).reduce((function(o,a){var i=e[a];return void 0===i?o:null===i?(n.skipNull||o.push([t(a),""].join("=")),o):Array.isArray(i)?(i.map((function(e){o.push("".concat(t(a),"[]=").concat(t(e)))})).join(),o):(o.push([t(a),t(i)].join("=")),o)}),[]).join("&")};function T(e){return y(e)}function S(e){return Object.keys(e).filter((function(e){return f.includes(e)}))}function D(e){var n;return Boolean(null===(n=S(e))||void 0===n?void 0:n.length)}function w(e){var n=function(e){return S(e).reduce((function(n,t){return n[t]=e[t],n}),{})}(e);return btoa(JSON.stringify(n))}function C(e,n){var t,o=document.createElement("iframe");for(var a in e&&(o.src=e),o.style.cssText=null!==(t=null==n?void 0:n.cssText)&&void 0!==t?t:"",o.width="100%",o.height="100%",o.style.border="none",null==n?void 0:n.properties){var i;n&&n.properties.hasOwnProperty(a)&&(o[a]=null!==(i=n.properties[a])&&void 0!==i?i:"")}return o}function N(e){return e=e||Object.create(null),{on:function(n,t){(e[n]||(e[n]=[])).push(t)},off:function(n,t){e[n]&&e[n].splice(e[n].indexOf(t)>>>0,1)},emit:function(n,t){(e[n]||[]).slice().map((function(e){e(t)})),(e["*"]||[]).slice().map((function(e){e(n,t)}))}}}var P,b={appId:0,superAppToken:"",loginDomain:"login.vk.com",oauthDomain:"oauth.vk.com",connectDomain:"connect.vk.com",_debug:!1},I={},K={events:N(),init:function(e){if(!e.appId)throw new Error("appId required");b.appId=e.appId,b.superAppToken=e.superAppToken||"",b.loginDomain=e.loginDomain||"login.vk.com",b.oauthDomain=e.oauthDomain||"oauth.vk.com",b.connectDomain=e.connectDomain||"connect.vk.com",b.appSettings=e.appSettings,b._debug=!!e._debug},get:function(){return b},setSuperAppToken:function(e){b.superAppToken=e,K.events.emit("superAppToken",e)},onRequestSuperAppToken:function(e){I.superAppToken=e},_requestSuperAppToken:function(){var e;I.superAppToken&&(e=I.superAppToken()),e&&e.then((function(e){return K.setSuperAppToken(e)})).catch(console.error)},onAuth:function(e){I.auth=e},_requestAuth:function(){var e;I.auth&&(e=I.auth()),e&&e.then((function(e){return K.setSuperAppToken(e)})).catch(console.error)},onOpenApp:function(e){I.openApp=e},_openApp:function(e){I.openApp&&I.openApp(e.app)}},k=["extend_token","login_with_user","__sferum_invite_link"];function L(e){return e&&k.includes(e.name)?btoa(JSON.stringify(e)):""}function M(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auth",t=K.get(),o=t.appId,a=t.connectDomain,i=t.appSettings,r=u({app_id:o,response_type:"silent_token",v:"0.0.2"},e);i&&D(i)&&(r.app_settings=w(i));var s=T(r);return"https://".concat(a,"/").concat(n,"?").concat(s)}!function(e){e.Default="default",e.NamePhone="name_phone",e.PhoneName="phone_name"}(P||(P={}));var R=[P.Default,P.NamePhone,P.PhoneName];function H(e,n){return void 0===e?n:"number"!=typeof e?e?1:0:e}var V,U,W,G,x,j,Y=function e(n){var t=this;i(this,e),s(this,"handler",(function(){return{}})),s(this,"config",void 0),s(this,"destroy",(function(){delete t.config,window.removeEventListener("message",t.handleMessage)})),s(this,"onMessage",(function(e){t.handler=e})),s(this,"sendMessage",(function(e){t.config.iframe.contentWindow.postMessage(u({type:"vk-sak-sdk"},e),t.config.origin)})),s(this,"handleMessage",(function(e){t.config.origin&&e.origin===t.config.origin&&e.source===t.config.iframe.contentWindow&&e.data&&"vk-sak-sdk"===e.data.type&&t.handler(e.data)})),this.config=n,window.addEventListener("message",this.handleMessage)};!function(e){e.SHOW_DATA_POLICY="VKSDKOneTapAuthConnectDataPolicy",e.HIDE_DATA_POLICY="VKSDKOneTapAuthDataPolicyClose",e.DATA_POLICY_RESULT="VKSDKOneTapAuthDataPolicyResult",e.SHOW_CAPTCHA="VKSDKOneTapAuthDataPolicyShowCaptcha"}(V||(V={})),function(e){e.SHOW_POLICY_AGREEMENTS="VKSDKOneTapAuthPolicyAgreementsShow",e.HIDE_POLICY_AGREEMENTS="VKSDKOneTapAuthPolicyAgreementsHide",e.ACCEPT_POLICY_AGREEMENTS="VKSDKOneTapAuthPolicyAgreementsAccept",e.DECLINE_POLICY_AGREEMENTS="VKSDKOneTapAuthPolicyAgreementsDecline",e.POLICY_AGREEMENTS_ERROR="VKSDKOneTapAuthPolicyAgreementsError",e.SHOW_DATA_POLICY="VKSDKOneTapAuthPolicyAgreementsShowDataPolicy"}(U||(U={})),function(e){e.CAPTCHA_SUCCESS="VKSDKAuthCaptchaSuccess",e.CAPTCHA_FAIL="VKSDKAuthCaptchaFail"}(W||(W={})),function(e){e.PHONE_VALIDATION_NEEDED="VKSDKOneTapAuthPhoneValidationNeeded",e.FULL_AUTH_NEEDED="VKSDKOneTapAuthFullAuthNeeded",e.AUTH_DATA_LOADED="VKSDKOneTapAuthDataLoaded",e.NOT_AUTHORIZED="VKSDKOneTapAuthNotAuthorized",e.LOGIN_SUCCESS="VKSDKOneTapAuthLoginSuccess",e.RESIZE_FRAME="VKSDKOneTapResizeFrame",e.SHOW_CAPTCHA="VKSDKOneTapShowCaptcha",e.VALIDATE_CAPTCHA="VKSDKOneTapValidateCaptcha"}(G||(G={})),function(e){e.CLOSE_AUTH="VKSDKOneTapAuthClose",e.ADAPTIVITY_CHANGE="VKSDKFloatingOneTapAdaptivityChange",e.ADAPTIVITY_CHANGED="VKSDKFloatingOneTapAdaptivityChanged"}(x||(x={})),function(e){e.SHOW_LOGIN="VKSDKButtonOneTapAuthShowLogin",e.SHOW_LOGIN_OPTIONS="VKSDKButtonOneTapAuthShowLoginOptions",e.SHOW_AGREEMENTS_DIALOG="VKSDKButtonOneTapAuthShowAgreementsDialog",e.START_AUTHORIZE="VKSDKButtonOneTapAuthStartAuthorize"}(j||(j={}));var F,q,z,Z=new function e(){var n=this;i(this,e),s(this,"flags",null),s(this,"silentAuth",(function(){var e=K.get(),n=e.loginDomain,t=e.appId,o=h(),a="https://".concat(n,"/?act=connect&app_id=").concat(t,"&response_type=").concat("silent_token","&uuid=").concat(o,"&v=").concat("0.0.2"),i=new XMLHttpRequest;return i.open("GET",a,!0),i.responseType="json",i.withCredentials=!0,new Promise((function(e,n){i.onload=function(){i.response?e({provider:"vk",payload:i.response}):n()},i.onerror=function(){n()},i.send()}))})),s(this,"oneTapAuth",(function(e,t){if(console.warn("Connect.oneTapAuth method is deprecated. Use Connect.floatingOneTapAuth and Connect.buttonOneTapAuth methods."),!["floating","button"].includes(e))return null;switch(e){case"button":return n.buttonOneTapAuth(t);case"floating":return n.floatingOneTapAuth(t);default:return null}})),s(this,"floatingOneTapAuth",(function(e){var t,o,a=function(){var e,n=window.innerWidth,t=n<=768;return{destroy:function(){return window.removeEventListener("resize",e)},isAdaptive:function(){return t},observe:function(o){e=function(){var e=window.innerWidth;n>768&&e<=768?o(t=!0):n<=768&&e>768&&o(t=!1),n=e},window.addEventListener("resize",e)}}}(),i=(o=(t=a.isAdaptive())?"314px":"334px",{pageUrl:"floating_one_tap_auth",pageUrlParams:{adaptive:t?1:0},frameStyles:t?"\n      display: none;\n      position: fixed;\n      bottom: 0;\n      right: 50%;\n      transform: translate(50%, 0);\n      max-width: 468px;\n      width: 100%;\n      height: ".concat(o,";\n    "):"\n        display: none;\n        position: fixed;\n        top: 0;\n        right: 0;\n        max-width: 400px;\n        width: 100%;\n        height: ".concat(o,";\n      ")});if(!i)throw new Error("options were not set");var r=h(),s=C(M(u({origin:location.protocol+"//"+location.host,uuid:r},i.pageUrlParams),i.pageUrl),{cssText:i.frameStyles}),c=new Y({iframe:s,origin:"https://"+K.get().connectDomain});a.observe((function(e){c.sendMessage({handler:x.ADAPTIVITY_CHANGE,params:{uuid:r,is_adaptive:e}}),e?(s.style.maxWidth="468px",s.style.top="auto",s.style.bottom="0",s.style.right="50%",s.style.transform="translate(50%, 0)"):(s.style.maxWidth="400px",s.style.top="0",s.style.bottom="auto",s.style.right="0",s.style.transform="none"),s.style.display="none"})),document.body.appendChild(s);var p=function(){c.sendMessage({handler:G.RESIZE_FRAME,params:{uuid:r}})};window.addEventListener("resize",p);var d=function(){s&&(s.remove(),s=null),window.removeEventListener("resize",p),a&&a.destroy(),c.destroy()},l=new Promise((function(t){c.onMessage((function(o){if(o.params.uuid===r)switch(o.handler){case G.NOT_AUTHORIZED:e.callback({type:o.handler,payload:{uuid:r,error:"not_authorized"}}),d(),t(o.handler);break;case G.RESIZE_FRAME:s.style.height="".concat(o.params.height,"px");break;case x.CLOSE_AUTH:e.callback({type:o.handler,payload:{uuid:r}}),d();break;case x.ADAPTIVITY_CHANGED:s.style.display="block";break;case G.AUTH_DATA_LOADED:s.style.display="block",t(o.handler);default:n.handleOneTapEvents(o,c,e)}}))}));return{getFrame:function(){return s},destroy:d,authReadyPromise:l}})),s(this,"buttonOneTapAuth",(function(e){var t=function(e){var n={},t=44;return e&&(n.display=e.displayMode&&R.includes(e.displayMode)?e.displayMode:"default",n.show_agreements=H(e.showAgreements,0),n.show_alternative_login=H(e.showAlternativeLogin,0),n.show_agreements_dialog=H(e.showAgreementsDialog,1),t+=n.show_alternative_login?56:0,t+=n.show_agreements?80:0),{pageUrl:"button_one_tap_auth",pageUrlParams:n,frameStyles:"\n        height: ".concat(t,"px;\n      ")}}(e.options);if(!t)throw new Error("options were not set");var o=h(),a=C(M(u({origin:location.protocol+"//"+location.host,uuid:o},t.pageUrlParams),t.pageUrl),{cssText:t.frameStyles}),i=e.container;i&&i.appendChild(a);var r=new Y({iframe:a,origin:"https://"+K.get().connectDomain}),s=function(){r.sendMessage({handler:G.RESIZE_FRAME,params:{uuid:o}})};return window.addEventListener("resize",s),{getFrame:function(){return a},destroy:function(){a&&(a.remove(),a=null),window.removeEventListener("resize",s),r.destroy()},authReadyPromise:new Promise((function(t){r.onMessage((function(i){if(i.params.uuid===o)switch(i.handler){case G.RESIZE_FRAME:a.style.height="".concat(i.params.height,"px");break;case G.NOT_AUTHORIZED:t(i.handler);break;case j.SHOW_LOGIN:case j.SHOW_LOGIN_OPTIONS:e.callback({type:i.handler,payload:{uuid:o}});break;case j.SHOW_AGREEMENTS_DIALOG:n.userPolicyAgreements(o).show().then((function(e){e&&e.accepted&&r.sendMessage({handler:j.START_AUTHORIZE,params:{uuid:o}})})).catch((function(){r.sendMessage({handler:U.DECLINE_POLICY_AGREEMENTS,params:{uuid:o}})}));break;case G.AUTH_DATA_LOADED:t(i.handler);default:n.handleOneTapEvents(i,r,e)}}))}))}})),s(this,"handleOneTapEvents",(function(e,t,o){var a=e.params.uuid;switch(e.handler){case G.AUTH_DATA_LOADED:t.sendMessage({handler:G.RESIZE_FRAME,params:{uuid:a}});break;case G.LOGIN_SUCCESS:o.callback({type:e.handler,provider:"vk",payload:u({uuid:a},e.params)});break;case G.SHOW_CAPTCHA:var i=n.captcha(a,{captcha_sid:e.params.captcha_sid,captcha_img:e.params.captcha_img});i.show().then((function(e){t.sendMessage({handler:W.CAPTCHA_SUCCESS,params:u({uuid:a},e)})})).catch((function(){t.sendMessage({handler:W.CAPTCHA_FAIL,params:{uuid:a}}),i.destroy()}));break;case V.SHOW_DATA_POLICY:n.userDataPolicy(a).show().then((function(){o.callback({type:V.DATA_POLICY_RESULT,payload:{uuid:a,policyAccepted:!0}})})).catch((function(){o.callback({type:V.DATA_POLICY_RESULT,payload:{uuid:a,policyAccepted:!1}})}));break;case G.FULL_AUTH_NEEDED:case G.PHONE_VALIDATION_NEEDED:o.callback({type:e.handler,payload:{uuid:a}})}})),s(this,"userDataPolicy",(function(e){var t=M({origin:location.protocol+"//"+location.host,uuid:e},"user_data_policy"),o=window.innerHeight,a="\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: ".concat(o,"px;\n      min-height: ").concat(o,"px;\n      border: none;\n      z-index: 99999;\n    "),i=C(t,{properties:{height:"".concat(o,"px")},cssText:a});document.body.appendChild(i);var r=new Y({iframe:i,origin:"https://"+K.get().connectDomain}),s=function(){i.style.display="none"};return{show:function(){return i.style.display="block",new Promise((function(t,o){r.onMessage((function(a){switch(a.handler){case V.HIDE_DATA_POLICY:s(),t();break;case V.SHOW_CAPTCHA:var c=n.captcha(e,{captcha_sid:a.params.captcha_sid,captcha_img:a.params.captcha_img});c.show().then((function(n){r.sendMessage({handler:W.CAPTCHA_SUCCESS,params:u({uuid:e},n)}),i.style.display="block"})).catch((function(){r.sendMessage({handler:W.CAPTCHA_FAIL,params:{uuid:e}}),c.destroy()})),s();break;default:s(),o()}}))}))},hide:s,destroy:function(){document.body.removeChild(i),r.destroy()}}})),s(this,"userPolicyAgreements",(function(e){var t,o,a,i=(t=M({origin:location.protocol+"//"+location.host,uuid:e},"user_policy_agreements"),o=window.innerHeight,a="\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: ".concat(o,"px;\n      min-height: ").concat(o,"px;\n      border: none;\n      z-index: 99999;\n    "),C(t,{properties:{height:"".concat(o,"px")},cssText:a}));document.body.appendChild(i);var r=new Y({iframe:i,origin:"https://"+K.get().connectDomain}),s=function(){i.style.display="none"};return{show:function(){return i.style.display="block",new Promise((function(t,o){r.onMessage((function(a){switch(a.handler){case U.ACCEPT_POLICY_AGREEMENTS:s(),t({accepted:!0});break;case U.DECLINE_POLICY_AGREEMENTS:s(),t({accepted:!1});break;case U.SHOW_DATA_POLICY:s();var r=function(){i.style.display="block"};n.userDataPolicy(e).show().then(r).catch(r);break;case U.POLICY_AGREEMENTS_ERROR:case U.HIDE_POLICY_AGREEMENTS:default:s(),o()}}))}))},hide:s,destroy:function(){document.body.removeChild(i),r.destroy()}}})),s(this,"captcha",(function(e,n){var t=M(u({origin:location.protocol+"//"+location.host,uuid:e},n),"auth_captcha"),o=window.innerHeight,a=C(t,{cssText:"\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: ".concat(o,"px;\n      min-height: ").concat(o,"px;\n      border: none;\n      z-index: 99999;\n    ")});document.body.appendChild(a);var i=new Y({iframe:a,origin:"https://"+K.get().connectDomain}),r=function(){document.body.removeChild(a),i.destroy()};return{show:function(){return a.style.display="block",new Promise((function(e,n){i.onMessage((function(t){switch(t.handler){case W.CAPTCHA_SUCCESS:e(t.params),r();break;default:n(),r()}}))}))},destroy:r}})),s(this,"userVisibleAuth",(function(e){var t=h(),o={origin:location.protocol+"//"+location.host,uuid:t};(null==e?void 0:e.screen)&&(o.screen=e.screen);var a=L(null==e?void 0:e.action);a&&(o.action=a);var i=M(o);n.flags&&(i="".concat(i,"#").concat(T(n.flags)));var r=screen.height/2-280,s=screen.width/2-410,c=window.open(i,"_blank","top=".concat(r,",left=").concat(s,",width=").concat(820,",height=").concat(560,",location"));if(!c){var u={code:p.CONNECT_WINDOW_NOT_OPENED,reason:"Connect window was not opened."};return Promise.reject(u)}return new Promise((function(e,n){var o=setInterval((function(){if(!c||c.closed){window.removeEventListener("message",a),clearInterval(o);var e={code:p.CONNECT_WINDOW_CLOSED,reason:"Connect window was closed."};n(e)}}),1e3);function a(i){if(i.source===c&&c)if(window.removeEventListener("message",a),clearInterval(o),".vk.com"===i.origin.slice(i.origin.length-".vk.com".length))if(i.data.action==="vk_connect_response"+t){var r=i.data.payload;c.close(),e({provider:"vk",payload:r})}else if(i.data.action==="oauth_callback"+t)e({provider:i.data.payload.name}),c.close();else{c.close();var s={code:p.CONNECT_UNKNOWN_SDK_MESSAGE,reason:_(JSON.stringify(i.data))};n(s)}else{c.close();var u={code:p.CONNECT_DOMAIN_NOT_ALLOWED,reason:A(i.origin)};n(u)}}window.addEventListener("message",a)}))})),s(this,"redirectAuth",(function(e){var n=h(),t={redirect_uri:e.url,uuid:n};(null==e?void 0:e.state)&&(t.redirect_state=e.state),(null==e?void 0:e.screen)&&(t.screen=e.screen);var o=L(null==e?void 0:e.action);o&&(t.action=o);var a=M(t);location.assign(a)}))};!function(e){e.APP_CLOSE="VKWebAppClose",e.APP_READY="VKSDKMiniAppReady",e.RESIZE="VKSDKMiniAppResize",e.APP_INIT_CONFIG="VKSDKMiniAppInitConfig",e.OPEN_APP="VKWebAppOpenApp",e.OPEN_PAY_FORM="VKWebAppOpenPayForm",e.ACTION_DONE="VKWebAppActionDone"}(F||(F={})),function(e){e.OPEN="open",e.HIDE="hide",e.CLOSE="close",e.SHOW="show",e.MESSAGE="message",e.CREATE_APP="createapp"}(q||(q={})),function(e){e.SUPERAPP_TOKEN="VKSDKGeneralSuperAppToken",e.AUTH_NEEDED="VKSDKGeneralAuthNeeded",e.OPEN_APP="VKSDKGeneralOpenApp"}(z||(z={}));var B;!function(e){e.INIT="ConnectProfileInit"}(B||(B={}));var J;!function(e){e.STATIC_MAP="VKSDKRequestToGeoservice:staticmap/png/",e.SEARCH="VKSDKRequestToGeoservice:search",e.OVERALL="VKSDKRequestToGeoservice:overall",e.DIRECTIONS="VKSDKRequestToGeoservice:directions",e.ISO="VKSDKRequestToGeoservice:iso"}(J||(J={}));!function(){function e(n){var t=this,o=n.apiKey;i(this,e),s(this,"iframe",void 0),s(this,"bridge",void 0),s(this,"requestMap",void 0),s(this,"apiKey",void 0),this.apiKey=o;var a=document.createElement("iframe"),r=K.get().appId;a.src=this.getGeoserviceProxyUrl({app_id:r}),a.style.cssText="\n      display: none;\n    ",this.iframe=a,document.body.appendChild(this.iframe),this.bridge=new Y({iframe:this.iframe,origin:"https://"+K.get().connectDomain}),this.requestMap={},this.bridge.onMessage((function(e){var n=e.params,o=n.requestID,a=n.response;t.requestMap[o].resolve(a),delete t.requestMap[o]}))}var n,t;n=e,(t=[{key:"setApiKey",value:function(e){this.apiKey=e}},{key:"getGeoserviceProxyUrl",value:function(e){var n=K.get(),t=n.connectDomain,o=n._debug,a=u({},e||{},{origin:location.protocol+"//"+location.host,localhost:String(location.host.includes("localhost")),debug:location.host.includes("localhost")?1:String(o)});return"https://".concat(t,"/geoservice?").concat(T(a))}},{key:"prepareAnswer",value:function(e,n,t){var o=this,a=h();return this.bridge.sendMessage({handler:"VKSDKRequestToGeoservice:".concat(e),params:u({},n,{api_key:this.apiKey,wrapRequestInJSON:t,requestID:a})}),new Promise((function(e,n){o.requestMap[a]={resolve:e,reject:n}}))}},{key:"getStaticMap",value:function(e){return this.prepareAnswer("staticmap/png/",e)}},{key:"encodeCoords",value:function(e){return this.prepareAnswer("search",e)}},{key:"decodeCoords",value:function(e){return this.prepareAnswer("overall",e)}},{key:"getDirections",value:function(e){return this.prepareAnswer("directions",e,!0)}},{key:"getISO",value:function(e){return this.prepareAnswer("iso",e,!0)}}])&&r(n.prototype,t)}()}}]);